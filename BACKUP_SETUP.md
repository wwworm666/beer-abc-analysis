# Настройка автоматических бэкапов

## Вариант 1: Ручной бэкап (САМЫЙ ПРОСТОЙ)

Когда проект работает и ты хочешь сохранить текущую версию:

### Способ 1 (через Проводник):
1. Открой папку `C:\Users\1\Documents\GitHub\beer-abc-analysis`
2. Найди файл `backup.bat`
3. **Двойной клик** по нему
4. Готово! Окно закроется автоматически

### Способ 2 (через командную строку):
1. Нажми `Win + R`
2. Введи: `cmd`
3. Введи команды:
```bash
cd "c:\Users\1\Documents\GitHub\beer-abc-analysis"
backup.bat
```

**Что произойдёт:**
- Создастся тег `backup-2025-11-15` (с текущей датой)
- Всё отправится на GitHub
- В файле `backup_log.txt` появится запись

---

## Вариант 2: Автоматический бэкап каждый день (РЕКОМЕНДУЮ)

### Шаг 1: Открыть Планировщик заданий

**Вариант А (через Поиск):**
1. Нажми на **Лупу** (поиск) рядом с кнопкой Пуск
2. Введи: `планировщик заданий`
3. Нажми на **Планировщик заданий**

**Вариант Б (быстрый):**
1. Нажми `Win + R`
2. Введи: `taskschd.msc`
3. Нажми Enter

![Откроется окно Планировщика заданий]

---

### Шаг 2: Создать новую задачу

1. В правой панели нажми **"Создать задачу..."** (НЕ "Создать простую задачу")

2. Откроется окно с вкладками

---

### Шаг 3: Вкладка "Общие"

1. **Имя**: `Beer ABC Backup`
2. **Описание**: `Автоматический бэкап проекта каждый день`
3. В разделе "Параметры безопасности":
   - ✅ Поставь точку на **"Выполнять для всех пользователей"**
   - ✅ Поставь галку **"Выполнять с наивысшими правами"**

---

### Шаг 4: Вкладка "Триггеры"

1. Нажми кнопку **"Создать..."**
2. В списке "Начать задачу:" выбери **"По расписанию"**
3. В разделе "Параметры":
   - ✅ Выбери **"Ежедневно"**
   - Начать: выбери сегодняшнюю дату
   - Время: `22:00:00` (10 вечера)
   - Повторять каждые: `1` дней
4. ✅ Убедись что стоит галка **"Включено"**
5. Нажми **"ОК"**

---

### Шаг 5: Вкладка "Действия"

1. Нажми кнопку **"Создать..."**
2. В списке "Действие:" выбери **"Запуск программы"**
3. **Программа или сценарий:**
   ```
   C:\Users\1\Documents\GitHub\beer-abc-analysis\backup.bat
   ```
   Или нажми **"Обзор"** и найди файл `backup.bat`

4. **Рабочая папка (необязательно):**
   ```
   C:\Users\1\Documents\GitHub\beer-abc-analysis
   ```

5. Нажми **"ОК"**

---

### Шаг 6: Вкладка "Условия"

1. В разделе "Питание":
   - ❌ **УБЕРИ галку** с "Запускать задачу только при питании от электросети"
   - ❌ **УБЕРИ галку** с "Останавливать при переходе на питание от батарей"

(Иначе на ноутбуке бэкап не запустится если он на батарее)

---

### Шаг 7: Вкладка "Параметры"

1. ✅ Поставь галку **"Выполнять задачу по требованию"**
2. ✅ Поставь галку **"Если задача не выполнена вовремя, запустить немедленно после пропуска"**
3. В списке "Если задача уже выполняется:" выбери **"Не запускать новый экземпляр"**

---

### Шаг 8: Сохранить

1. Нажми **"ОК"** внизу окна
2. Если попросит пароль - введи пароль от Windows
3. Готово!

---

### Шаг 9: Проверка (ВАЖНО!)

Сразу проверим что всё работает:

1. В **Планировщике заданий** найди задачу `Beer ABC Backup`
2. **Правой кнопкой мыши** по задаче
3. Выбери **"Выполнить"**
4. Открой папку проекта - должен появиться файл `backup_log.txt`

Если файл появился - всё работает! ✅

---

## Проверка работы

### Запустить бэкап вручную:

1. В Task Scheduler найди задачу `Beer ABC Backup`
2. Правой кнопкой → **Run**
3. Проверь что появился файл `backup_log.txt`

### Посмотреть все бэкапы:

```bash
cd "c:\Users\1\Documents\GitHub\beer-abc-analysis"
git tag -l "backup-*"
```

Вывод:
```
backup-2025-11-15
backup-2025-11-16
backup-2025-11-17
```

---

## Восстановление из бэкапа

### Вариант 1: Посмотреть код из бэкапа

```bash
# Посмотреть файл из бэкапа
git show backup-2025-11-15:app.py
```

### Вариант 2: Вернуться к бэкапу

```bash
# ОСТОРОЖНО! Это удалит все текущие изменения
git checkout backup-2025-11-15
```

### Вариант 3: Создать ветку из бэкапа

```bash
# Безопасный способ - создать новую ветку
git checkout -b restore-from-backup backup-2025-11-15
```

---

## Очистка старых бэкапов

Через 6 месяцев можно удалить старые теги:

```bash
# Удалить тег локально
git tag -d backup-2025-05-15

# Удалить тег на GitHub
git push origin :refs/tags/backup-2025-05-15
```

---

## Частота бэкапов

**Рекомендации:**

- **Каждый день в 22:00** - если активно работаешь
- **Каждую неделю** - если редко меняешь код
- **Перед деплоем** - ОБЯЗАТЕЛЬНО (запусти `backup.bat` вручную)

---

## Проблемы и решения

### "Access denied" при создании задачи

Запусти Task Scheduler от имени администратора.

### Скрипт не запускается

Проверь что Git установлен и доступен в PATH:
```bash
git --version
```

### Бэкап не пушится на GitHub

Проверь что настроена аутентификация Git:
```bash
git config --global user.name
git config --global user.email
```

---

## Логи бэкапов

Все запуски записываются в файл `backup_log.txt`:

```
15.11.2025 22:00:05 - Backup completed
16.11.2025 22:00:03 - Backup completed
17.11.2025 22:00:07 - Backup completed
```
