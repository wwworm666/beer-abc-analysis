<!-- –í–∫–ª–∞–¥–∫–∞ "–ì—Ä–∞—Ñ–∏–∫–∏" -->

<!-- Loading State -->
<div id="charts-loading-state" class="loading-container hidden">
    <div class="loading-spinner"></div>
</div>

<!-- No Data State -->
<div id="charts-no-data-state" class="no-data-state hidden">
    <h3>üìä –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
    <p>–î–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.</p>
</div>

<!-- Charts Grid -->
<div id="charts-grid" class="charts-grid hidden">
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –í—ã—Ä—É—á–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ -->
    <div class="chart-card">
        <div class="chart-header">
            <h3>üìÖ –í—ã—Ä—É—á–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</h3>
            <p class="chart-subtitle">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏</p>
        </div>
        <div class="chart-wrapper">
            <canvas id="chart-revenue-by-day"></canvas>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –¢—Ä–µ–Ω–¥ –≤—ã—Ä—É—á–∫–∏ (12 –Ω–µ–¥–µ–ª—å) -->
    <div class="chart-card">
        <div class="chart-header">
            <h3>üìà –¢—Ä–µ–Ω–¥ –≤—ã—Ä—É—á–∫–∏ (12 –Ω–µ–¥–µ–ª—å)</h3>
            <p class="chart-subtitle">–î–∏–Ω–∞–º–∏–∫–∞ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –Ω–µ–¥–µ–ª—å</p>
        </div>
        <div class="chart-wrapper">
            <canvas id="chart-revenue-trend"></canvas>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –î–æ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–ø–ª–∞–Ω vs —Ñ–∞–∫—Ç) -->
    <div class="chart-card">
        <div class="chart-header">
            <h3>üéØ –î–æ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: –ü–ª–∞–Ω vs –§–∞–∫—Ç</h3>
            <p class="chart-subtitle">–†–æ–∑–ª–∏–≤, —Ñ–∞—Å–æ–≤–∫–∞, –∫—É—Ö–Ω—è</p>
        </div>
        <div class="chart-wrapper chart-wrapper-horizontal">
            <div class="chart-half">
                <h4>–ü–ª–∞–Ω</h4>
                <canvas id="chart-shares-plan"></canvas>
            </div>
            <div class="chart-half">
                <h4>–§–∞–∫—Ç</h4>
                <canvas id="chart-shares-actual"></canvas>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞: –î–∏–Ω–∞–º–∏–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞ -->
    <div class="chart-card">
        <div class="chart-header">
            <h3>üíµ –î–∏–Ω–∞–º–∏–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞</h3>
            <p class="chart-subtitle">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ vs –ø–ª–∞–Ω–æ–≤—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å</p>
        </div>
        <div class="chart-wrapper">
            <canvas id="chart-avg-check"></canvas>
        </div>
    </div>
</div>

<!-- –°–µ–∫—Ü–∏—è —Ç—Ä–µ–Ω–¥–æ–≤ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div class="trends-section">
    <div class="trends-header">
        <h2>üîÆ –¢—Ä–µ–Ω–¥—ã –∏ –ø—Ä–æ–≥–Ω–æ–∑</h2>
        <p class="subtitle">–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 12 –Ω–µ–¥–µ–ª—å –∏ –ø—Ä–æ–≥–Ω–æ–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞</p>
    </div>

    <!-- Loading State -->
    <div id="trends-loading" class="loading-container hidden">
        <div class="loading-spinner"></div>
    </div>

    <!-- No Data State -->
    <div id="trends-no-data" class="no-data-state hidden">
        <h3>üìä –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö</h3>
        <p>–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 3 –Ω–µ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö</p>
    </div>

    <!-- Results -->
    <div id="trends-results" class="trends-results hidden">
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="trends-stats-grid">
            <div class="stat-card">
                <div class="stat-label">–°—Ä–µ–¥–Ω–µ–µ</div>
                <div class="stat-value" id="trends-stat-mean">0 ‚ÇΩ</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–ú–∞–∫—Å–∏–º—É–º</div>
                <div class="stat-value" id="trends-stat-max">0 ‚ÇΩ</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–ú–∏–Ω–∏–º—É–º</div>
                <div class="stat-value" id="trends-stat-min">0 ‚ÇΩ</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">–°—Ç–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ</div>
                <div class="stat-value" id="trends-stat-stddev">0 ‚ÇΩ</div>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥–Ω–æ–∑ -->
        <div class="forecast-section">
            <h3>üéØ –ü—Ä–æ–≥–Ω–æ–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞</h3>
            <div class="forecast-grid">
                <div class="forecast-card">
                    <div class="forecast-icon" id="trends-trend-icon">üìà</div>
                    <div class="forecast-details">
                        <div class="forecast-label">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–∞—è –≤—ã—Ä—É—á–∫–∞</div>
                        <div class="forecast-value" id="trends-forecast-revenue">0 ‚ÇΩ</div>
                    </div>
                </div>
                <div class="forecast-meta">
                    <div class="forecast-meta-item">
                        <span class="meta-label">–¢—Ä–µ–Ω–¥:</span>
                        <span class="meta-value" id="trends-forecast-trend">-</span>
                    </div>
                    <div class="forecast-meta-item">
                        <span class="meta-label">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</span>
                        <span class="meta-value" id="trends-forecast-confidence">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ —Ç—Ä–µ–Ω–¥–∞ -->
        <div class="trend-chart-section">
            <h3>üìà –ì—Ä–∞—Ñ–∏–∫ —Ç—Ä–µ–Ω–¥–∞ (12 –Ω–µ–¥–µ–ª—å + –ø—Ä–æ–≥–Ω–æ–∑)</h3>
            <div class="chart-wrapper">
                <canvas id="trends-chart"></canvas>
            </div>
        </div>

        <!-- –¢–∞–±–ª–∏—Ü–∞ –Ω–µ–¥–µ–ª—å -->
        <div class="trends-table-section">
            <h3>üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –Ω–µ–¥–µ–ª—è–º</h3>
            <div class="table-wrapper">
                <table class="trends-table">
                    <thead>
                        <tr>
                            <th>–ù–µ–¥–µ–ª—è</th>
                            <th>–í—ã—Ä—É—á–∫–∞</th>
                            <th>–ß–µ–∫–∏</th>
                            <th>–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</th>
                            <th>–ò–∑–º–µ–Ω–µ–Ω–∏–µ</th>
                        </tr>
                    </thead>
                    <tbody id="trends-weeks-table-body">
                        <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
.charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: var(--spacing-lg);
    margin-top: var(--spacing-lg);
}

.chart-card {
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    padding: var(--spacing-lg);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.chart-header {
    margin-bottom: var(--spacing-md);
}

.chart-header h3 {
    margin: 0 0 var(--spacing-xs) 0;
    color: var(--accent);
}

.chart-subtitle {
    margin: 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.chart-wrapper {
    position: relative;
    height: 300px;
    margin-top: var(--spacing-md);
}

.chart-wrapper canvas {
    max-height: 100%;
}

.chart-wrapper-horizontal {
    display: flex;
    gap: var(--spacing-md);
    height: 300px;
}

.chart-half {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.chart-half h4 {
    margin: 0 0 var(--spacing-sm) 0;
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.chart-half canvas {
    flex: 1;
}

.no-data-state {
    text-align: center;
    padding: var(--spacing-xl);
}

.no-data-state h3 {
    color: var(--text-secondary);
    margin-bottom: var(--spacing-md);
}

.no-data-state p {
    color: var(--text-secondary);
    font-size: 0.95rem;
}

@media (max-width: 768px) {
    .charts-grid {
        grid-template-columns: 1fr;
    }

    .chart-wrapper-horizontal {
        flex-direction: column;
        height: auto;
    }

    .chart-half {
        height: 250px;
    }
}

/* Trends Section */
.trends-section {
    margin-top: var(--spacing-xl);
    padding-top: var(--spacing-xl);
    border-top: 2px solid var(--border-color);
}

.trends-header {
    margin-bottom: var(--spacing-lg);
}

.trends-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
}

.stat-card {
    background: var(--bg-secondary);
    padding: var(--spacing-md);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
    text-align: center;
}

.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--accent);
}

.forecast-section {
    margin-bottom: var(--spacing-xl);
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
    border: 1px solid var(--border-color);
}

.forecast-grid {
    display: flex;
    gap: var(--spacing-lg);
    align-items: center;
    margin-top: var(--spacing-md);
}

.forecast-card {
    flex: 1;
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    padding: var(--spacing-md);
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
    color: white;
    border-radius: var(--border-radius);
}

.forecast-icon {
    font-size: 3rem;
}

.forecast-label {
    font-size: 0.85rem;
    opacity: 0.9;
}

.forecast-value {
    font-size: 1.8rem;
    font-weight: 700;
}

.forecast-meta {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.forecast-meta-item {
    display: flex;
    gap: var(--spacing-xs);
}

.meta-label {
    font-weight: 500;
    color: var(--text-secondary);
}

.meta-value {
    font-weight: 600;
    color: var(--accent);
}

.trend-chart-section {
    margin-bottom: var(--spacing-xl);
}

.trends-table-section {
    margin-bottom: var(--spacing-xl);
}

.trends-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-secondary);
    border-radius: var(--border-radius);
    overflow: hidden;
}

.trends-table thead {
    background: var(--accent);
    color: white;
}

.trends-table th,
.trends-table td {
    padding: var(--spacing-sm) var(--spacing-md);
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

.trends-table tbody tr:last-child td {
    border-bottom: none;
}

.trends-table tbody tr:hover {
    background: var(--bg-hover);
}

.trends-table .positive {
    color: var(--success);
    font-weight: 600;
}

.trends-table .negative {
    color: var(--error);
    font-weight: 600;
}

@media (max-width: 768px) {
    .forecast-grid {
        flex-direction: column;
    }
}
</style>
