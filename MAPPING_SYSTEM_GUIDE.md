# –°–∏—Å—Ç–µ–º–∞ –º—ç–ø–ø–∏–Ω–≥–∞ KEG ‚Üî DISH (–ö–µ–≥–∏ ‚Üî –ë–ª—é–¥–∞)

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º—ç–ø–ø–∏–Ω–≥–∞ —Å–æ–∑–¥–∞–µ—Ç –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∏–Ω–¥–µ–∫—Å –º–µ–∂–¥—É:
- **–ö–µ–≥–∞–º–∏** (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —ë–º–∫–æ—Å—Ç–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ iiko)
- **–ë–ª—é–¥–∞–º–∏** (–ø–æ–∑–∏—Ü–∏–∏ –≤ –º–µ–Ω—é –∏ —á–µ–∫–∞—Ö POS)

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–¥–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –ø–∏–≤–∞, —Å–æ–µ–¥–∏–Ω—è—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å iiko —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏, –ø—Ä–æ–¥–∞–Ω–Ω—ã–º–∏ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ.

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –º—ç–ø–ø–∏–Ω–≥–∞

```
mapping/
‚îî‚îÄ‚îÄ keg_mapping.py                 # Production mapping (140 –∫–µ–≥–æ–≤)
    ‚îú‚îÄ KEG_TO_DISH_MAPPING dict    # –ö–µ–≥ ‚Üí –°–ø–∏—Å–æ–∫ –±–ª—é–¥
    ‚îî‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

data/
‚îú‚îÄ‚îÄ keg_mapping.json               # JSON –≤–µ—Ä—Å–∏—è (API-friendly)
‚îú‚îÄ‚îÄ dish_to_keg_mapping.json       # –û–±—Ä–∞—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å
‚îú‚îÄ‚îÄ keg_to_dish_mapping_CHECK.csv  # –î–ª—è —Ä–µ–≤—å—é
‚îî‚îÄ‚îÄ active_dishes_to_kegs_CLEAN.csv.csv # –ò—Å—Ö–æ–¥–Ω—ã–π CSV
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

```
utils/
‚îú‚îÄ‚îÄ import_final_mapping.py        # –û–°–ù–û–í–ù–û–ô: —á–∏—Ç–∞–µ—Ç CSV ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã
‚îú‚îÄ‚îÄ check_unmapped_dishes.py       # –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã–µ –±–ª—é–¥–∞
‚îî‚îÄ‚îÄ auto_add_new_dishes.py         # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –±–ª—é–¥–∞
```

---

## üîÑ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä—è–º–æ–µ –º—ç–ø–ø–∏–Ω–≥ (–ö–µ–≥ ‚Üí –ë–ª—é–¥–∞)

```python
{
    '–ö–ï–ì Brewlok IPA 20 –ª': [
        'Brewlok IPA',           # –û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
        '–í–û Brewlok IPA'         # –í–∞—Ä–∏–∞–Ω—Ç —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º
    ],
    '–ö–ï–ì –§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å 30 –ª': [
        '–§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å'
    ],
    ...
}
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–¥–∏–Ω –∫–µ–≥ –º–æ–∂–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –±–ª—é–¥–∞–º
- –ë–ª—é–¥–∞ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
  - **–ù–ó** - –ù–æ –ó–∞—á–µ–º?
  - **–í–û** - –í–æ –í—Ä–µ–º—è
  - **–¢–¶** - –¢–æ—Ä–≥–æ–≤—ã–π –¶–µ–Ω—Ç—Ä
- –ò–º–µ–Ω–∞ –∫–µ–≥–æ–≤ –≤–∫–ª—é—á–∞—é—Ç –æ–±—ä—ë–º (20–ª, 30–ª, 50–ª)

### –û–±—Ä–∞—Ç–Ω–æ–µ –º—ç–ø–ø–∏–Ω–≥ (–ë–ª—é–¥–æ ‚Üí –ö–µ–≥)

```python
{
    'Brewlok IPA': '–ö–ï–ì Brewlok IPA 20 –ª',
    '–í–û Brewlok IPA': '–ö–ï–ì Brewlok IPA 20 –ª',
    '–§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å': '–ö–ï–ì –§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å 30 –ª',
    ...
}
```

---

## üì° –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1Ô∏è‚É£ –ò–º–ø–æ—Ä—Ç (CSV ‚Üí Python/JSON)

```
CSV –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª (tochno prav...)
         ‚Üì
utils/import_final_mapping.py
         ‚Üì
    ‚îú‚îÄ‚Üí mapping/keg_mapping.py (–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ)
    ‚îú‚îÄ‚Üí data/keg_mapping.json (API)
    ‚îî‚îÄ‚Üí data/dish_to_keg_mapping.json (–æ–±—Ä–∞—Ç–Ω—ã–π)
```

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
python utils/import_final_mapping.py
```

### 2Ô∏è‚É£ –í–∞–ª–∏–¥–∞—Ü–∏—è (–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –±–ª—é–¥)

```
iiko API (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π –ø—Ä–æ–¥–∞–∂)
         ‚Üì
check_unmapped_dishes.py
         ‚Üì
  –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–∏–º –º—ç–ø–ø–∏–Ω–≥–æ–º
         ‚Üì
  –≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö –±–ª—é–¥ –≤ CSV
```

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
python utils/check_unmapped_dishes.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `NEW_DISHES_TO_ADD.csv`

### 3Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (Fuzzy matching)

```
NEW_DISHES_TO_ADD.csv
         ‚Üì
auto_add_new_dishes.py
         ‚Üì
  –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:
  1. –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (case-insensitive)
  2. Substring matching (70%+ similarity)
  3. –û–±—Ä–∞—Ç–Ω—ã–π substring matching
         ‚Üì
  ‚îú‚îÄ‚Üí AUTO (–≤—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
  ‚îî‚îÄ‚Üí MANUAL_REQUIRED (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
         ‚Üì
  –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CSV –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
python utils/auto_add_new_dishes.py
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### –í Draft Analysis (core/draft_analysis.py)

```python
from mapping.keg_mapping import KEG_TO_DISH_MAPPING

# –ü–æ–ª—É—á–∏—Ç—å –±–ª—é–¥–∞ –¥–ª—è –∫–µ–≥–∞
dishes = KEG_TO_DISH_MAPPING.get('–ö–ï–ì Brewlok IPA 20 –ª')
# ['Brewlok IPA', '–í–û Brewlok IPA']
```

### –û–±—Ä–∞—Ç–Ω–æ–µ –º—ç–ø–ø–∏–Ω–≥ (JSON)

```python
import json

with open('data/dish_to_keg_mapping.json') as f:
    dish_to_keg = json.load(f)

keg = dish_to_keg.get('Brewlok IPA')
# '–ö–ï–ì Brewlok IPA 20 –ª'
```

### –í Flask API (app.py)

–ú—ç–ø–ø–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏:
- `/api/draft-analyze` - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥–∞–∂ —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –ø–∏–≤–∞
- `/api/categories` - –∞–Ω–∞–ª–∏–∑ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- `/api/waiter-analyze` - –∞–Ω–∞–ª–∏–∑ –ø–æ –æ—Ñ–∏—Ü–∏–∞–Ω—Ç–∞–º

---

## üîç –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –±–ª—é–¥

### –ü—Ä–æ—Ü–µ—Å—Å –æ—á–∏—Å—Ç–∫–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –±–ª—é–¥ –ø–µ—Ä–µ–¥ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º:

```
Raw:           "–í–û Brewlok IPA (0.5)"
Remove prefix: "Brewlok IPA (0.5)"
Remove portion: "Brewlok IPA"
Final:         "Brewlok IPA" ‚Üê –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º—ç–ø–ø–∏–Ω–≥–∞
```

### –£–¥–∞–ª—è–µ–º—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã

- `–ù–ó ` (–ù–æ –ó–∞—á–µ–º?)
- `–í–û ` (–í–æ –í—Ä–µ–º—è)
- `–¢–¶ ` (–¢–æ—Ä–≥–æ–≤—ã–π –¶–µ–Ω—Ç—Ä)

### –£–¥–∞–ª—è–µ–º—ã–µ –ø–æ—Ä—Ü–∏–∏

–í—Å—ë –ø–æ—Å–ª–µ `(X,X)` —É–¥–∞–ª—è–µ—Ç—Å—è:
- `(0.5)` ‚Üí 0.5L
- `(0.25)` ‚Üí 0.25L
- `(1.0)` ‚Üí 1.0L

---

## üîÑ –¶–∏–∫–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º—ç–ø–ø–∏–Ω–≥–∞

### –û–±—ã—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç—å `check_unmapped_dishes.py`
   ```bash
   python utils/check_unmapped_dishes.py
   ```

2. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è `NEW_DISHES_TO_ADD.csv`
   - –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—ã–µ –±–ª—é–¥–∞, –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ–¥–∞–∂–∞—Ö
   - –¢—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è KEG_NAME –¥–ª—è –∫–∞–∂–¥–æ–≥–æ

3. **–†—É—á–Ω–æ–µ —Ä–µ–≤—å—é:**
   - –û—Ç–∫—Ä—ã—Ç—å `NEW_DISHES_TO_ADD.csv`
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–æ–ª–±–µ—Ü `KEG_NAME` –¥–ª—è –Ω–æ–≤—ã—Ö –±–ª—é–¥
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª

4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**
   ```bash
   python utils/auto_add_new_dishes.py
   ```
   - –ü—ã—Ç–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π—Ç–∏ KEG_NAME
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π CSV

5. **–§–∏–Ω–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç:**
   ```bash
   python utils/import_final_mapping.py
   ```
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ `keg_mapping.py` –∏ JSON —Ñ–∞–π–ª—ã

6. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   ```bash
   python app.py
   ```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (Windows)

```batch
# daily_update_mapping.bat
python utils/check_unmapped_dishes.py
python utils/auto_add_new_dishes.py
python utils/import_final_mapping.py
```

---

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ò–∑ `mapping/keg_mapping.py`:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–ê–∫—Ç–∏–≤–Ω—ã–µ –∫–µ–≥–∏** | ~140 |
| **–ë–ª—é–¥–∞** | –°–æ—Ç–Ω–∏ (1 –∫–µ–≥ ‚Üí –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª—é–¥) |
| **–ü–µ—Ä–∏–æ–¥** | 2025 (–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏) |
| **–í–µ—Ä—Å–∏—è** | 2025-10-18 01:38:18 |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ü–æ—Ä—è–¥–æ–∫ —Ñ–∞–π–ª–æ–≤

**–ò–µ—Ä–∞—Ä—Ö–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```
CSV –∏—Å—Ö–æ–¥–Ω—ã–π
   ‚Üì (–∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç)
keg_mapping.py (production)
   ‚Üì
app.py –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
```

**–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é** `keg_mapping.py` - –µ–≥–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç `import_final_mapping.py`

### 2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ:
```bash
# ‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
check_unmapped_dishes.py
  ‚Üì
auto_add_new_dishes.py (–æ–±–Ω–æ–≤–ª—è–µ—Ç CSV)
  ‚Üì
import_final_mapping.py (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥—ã)

# ‚úó –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
import_final_mapping.py –æ–¥–∏–Ω ‚Üí —Ç–µ—Ä—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –±–ª—é–¥–∞
```

### 3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

`mapping/keg_mapping.py` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ß—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å –º—ç–ø–ø–∏–Ω–≥
python utils/import_final_mapping.py

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python app.py
```

---

## üîé –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ù–∞–π—Ç–∏ –≤—Å–µ –±–ª—é–¥–∞ –¥–ª—è –∫–µ–≥–∞

```python
from mapping.keg_mapping import KEG_TO_DISH_MAPPING

keg_name = '–ö–ï–ì –§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å 30 –ª'
dishes = KEG_TO_DISH_MAPPING[keg_name]
# ['–§–µ—Å—Ç–•–∞—É—Å –•–µ–ª–ª–µ—Å']
```

### –ü—Ä–∏–º–µ—Ä 2: –ù–∞–π—Ç–∏ –∫–µ–≥ –¥–ª—è –±–ª—é–¥–∞

```python
import json

with open('data/dish_to_keg_mapping.json') as f:
    dish_to_keg = json.load(f)

dish = 'Brewlok IPA'
keg = dish_to_keg[dish]
# '–ö–ï–ì Brewlok IPA 20 –ª'
```

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–∞–ø–ø–∏—Ä–æ–≤–∞–Ω–æ –ª–∏ –±–ª—é–¥–æ

```python
from mapping.keg_mapping import KEG_TO_DISH_MAPPING

def is_mapped(dish_name):
    for dishes in KEG_TO_DISH_MAPPING.values():
        if dish_name in dishes:
            return True
    return False

is_mapped('Brewlok IPA')  # True
is_mapped('Unknown Beer')  # False
```

---

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–æ–≤–æ–µ –±–ª—é–¥–æ –Ω–µ –≤ –º—ç–ø–ø–∏–Ω–≥–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
python utils/check_unmapped_dishes.py
# –°–º–æ—Ç—Ä–µ—Ç—å NEW_DISHES_TO_ADD.csv
# –î–æ–±–∞–≤–∏—Ç—å KEG_NAME –≤—Ä—É—á–Ω—É—é
python utils/auto_add_new_dishes.py
python utils/import_final_mapping.py
python app.py  # –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û–¥–Ω–æ –±–ª—é–¥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–µ–≥–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π CSV –Ω–∞–ø—Ä—è–º—É—é
# mapping/tochno prav spisok - active_dishes_to_kegs_CLEAN.csv.csv
# –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É, –∏—Å–ø—Ä–∞–≤–∏—Ç—å KEG_NAME

# 2. –ü–µ—Ä–µ—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º—ç–ø–ø–∏–Ω–≥
python utils/import_final_mapping.py

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python app.py
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –≤ –Ω–æ–≤—ã—Ö –±–ª—é–¥–∞—Ö

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—á–∏—Å—Ç–∏—Ç—å `NEW_DISHES_TO_ADD.csv`
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π CSV –≤—Ä—É—á–Ω—É—é
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `import_final_mapping.py`

---

## üìù –§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤

### CSV –∏—Å—Ö–æ–¥–Ω—ã–π

–°—Ç–æ–ª–±—Ü—ã:
- `KEG_NAME` - –ò–º—è –∫–µ–≥–∞ –∏–∑ iiko
- `DISH_NAME` - –ù–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞ –≤ –º–µ–Ω—é
- `PREFIX` - –ü—Ä–µ—Ñ–∏–∫—Å (–ù–ó, –í–û, –¢–¶ –∏–ª–∏ –ø—É—Å—Ç–æ)
- `STATUS` - AUTO / MANUAL / VERIFIED

### JSON (keg_mapping.json)

```json
{
  "–ö–ï–ì Brewlok IPA 20 –ª": [
    "Brewlok IPA",
    "–í–û Brewlok IPA"
  ]
}
```

### JSON (dish_to_keg_mapping.json)

```json
{
  "Brewlok IPA": "–ö–ï–ì Brewlok IPA 20 –ª",
  "–í–û Brewlok IPA": "–ö–ï–ì Brewlok IPA 20 –ª"
}
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –º—ç–ø–ø–∏–Ω–≥–∞ - —ç—Ç–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π —Å–ª–æ–π –¥–∞–Ω–Ω—ã—Ö**, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –°–æ–µ–¥–∏–Ω—è–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å iiko —Å POS –º–µ–Ω—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –±–ª—é–¥–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ –ø–∏–≤–∞
- ‚úÖ –õ–µ–≥–∫–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–¥–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤

**–ü–æ–º–Ω–∏—Ç–µ:** –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –º—ç–ø–ø–∏–Ω–≥ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã, –∞ –Ω–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `keg_mapping.py` –Ω–∞–ø—Ä—è–º—É—é!
