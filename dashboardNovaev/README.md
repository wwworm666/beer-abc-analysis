# üìä –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥ –ù–æ–≤–∞–µ–≤–∞

–ú–æ–¥—É–ª—å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫ –±–∏–∑–Ω–µ—Å–∞.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
dashboardNovaev/
‚îú‚îÄ‚îÄ dashboard_analysis.py    # Python-–º–æ–¥—É–ª—å –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫
‚îî‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

templates/
‚îî‚îÄ‚îÄ dashboard.html           # HTML-—à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞—à–±–æ—Ä–¥–∞
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–î–∞—à–±–æ—Ä–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç **15 –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫** –±–∏–∑–Ω–µ—Å–∞:

### –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
1. **–í—ã—Ä—É—á–∫–∞** - –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥ (‚ÇΩ)
2. **–ß–µ–∫–∏** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–∫–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
3. **–°—Ä–µ–¥–Ω–∏–π —á–µ–∫** - —Å—Ä–µ–¥–Ω—è—è —Å—É–º–º–∞ —á–µ–∫–∞ (‚ÇΩ)

### –î–æ–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
4. **–î–æ–ª—è —Ä–æ–∑–ª–∏–≤–∞** - –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã—Ä—É—á–∫–∏ –æ—Ç —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –ø–∏–≤–∞ (%)
5. **–î–æ–ª—è —Ñ–∞—Å–æ–≤–∫–∏** - –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã—Ä—É—á–∫–∏ –æ—Ç —Ñ–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∏–≤–∞ (%)
6. **–î–æ–ª—è –∫—É—Ö–Ω–∏** - –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã—Ä—É—á–∫–∏ –æ—Ç –∫—É—Ö–Ω–∏ (%)

### –í—ã—Ä—É—á–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
7. **–í—ã—Ä—É—á–∫–∞ —Ä–æ–∑–ª–∏–≤** - –≤—ã—Ä—É—á–∫–∞ –æ—Ç —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ –ø–∏–≤–∞ (‚ÇΩ)
8. **–í—ã—Ä—É—á–∫–∞ —Ñ–∞—Å–æ–≤–∫–∞** - –≤—ã—Ä—É—á–∫–∞ –æ—Ç —Ñ–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∏–≤–∞ (‚ÇΩ)
9. **–í—ã—Ä—É—á–∫–∞ –∫—É—Ö–Ω—è** - –≤—ã—Ä—É—á–∫–∞ –æ—Ç –∫—É—Ö–Ω–∏ (‚ÇΩ)

### –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å
10. **% –Ω–∞—Ü–µ–Ω–∫–∏** - —Å—Ä–µ–¥–Ω—è—è –Ω–∞—Ü–µ–Ω–∫–∞ –ø–æ –≤—Å–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (%)
11. **–ü—Ä–∏–±—ã–ª—å** - –æ–±—â–∞—è –ø—Ä–∏–±—ã–ª—å (–º–∞—Ä–∂–∞) (‚ÇΩ)

### –ù–∞—Ü–µ–Ω–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
12. **–ù–∞—Ü–µ–Ω–∫–∞ —Ä–æ–∑–ª–∏–≤** - —Å—Ä–µ–¥–Ω—è—è –Ω–∞—Ü–µ–Ω–∫–∞ –Ω–∞ —Ä–∞–∑–ª–∏–≤–Ω–æ–µ –ø–∏–≤–æ (%)
13. **–ù–∞—Ü–µ–Ω–∫–∞ —Ñ–∞—Å–æ–≤–∫–∞** - —Å—Ä–µ–¥–Ω—è—è –Ω–∞—Ü–µ–Ω–∫–∞ –Ω–∞ —Ñ–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –ø–∏–≤–æ (%)
14. **–ù–∞—Ü–µ–Ω–∫–∞ –∫—É—Ö–Ω—è** - —Å—Ä–µ–¥–Ω—è—è –Ω–∞—Ü–µ–Ω–∫–∞ –Ω–∞ –∫—É—Ö–Ω—é (%)

### –õ–æ—è–ª—å–Ω–æ—Å—Ç—å
15. **–°–ø–∏—Å–∞–Ω–∏—è –±–∞–ª–ª–æ–≤** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∏—Å–∞–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É: `http://localhost:5000/dashboard`
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–∞—Ä (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ "–û–±—â–∞—è" –¥–ª—è –≤—Å–µ—Ö –±–∞—Ä–æ–≤)
3. –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"

### API

–≠–Ω–¥–ø–æ–∏–Ω—Ç: `POST /api/dashboard-analytics`

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "bar": "–ë–æ–ª—å—à–æ–π –ø—Ä. –í.–û",  // –∏–ª–∏ "" –¥–ª—è –≤—Å–µ—Ö –±–∞—Ä–æ–≤
  "date_from": "2024-01-01",
  "date_to": "2024-01-31"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "total_revenue": 1500000.00,
  "total_checks": 3245,
  "avg_check": 462.19,
  "draft_share": 45.50,
  "bottles_share": 35.20,
  "kitchen_share": 19.30,
  "draft_revenue": 682500.00,
  "bottles_revenue": 528000.00,
  "kitchen_revenue": 289500.00,
  "avg_markup": 215.50,
  "total_margin": 950000.00,
  "draft_markup": 230.00,
  "bottles_markup": 210.00,
  "kitchen_markup": 195.00,
  "loyalty_points_written_off": 0,
  "table_data": [...]
}
```

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from dashboardNovaev.dashboard_analysis import DashboardAnalytics
import pandas as pd

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
draft_df = pd.DataFrame(...)  # –î–∞–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏–≤–Ω–æ–≥–æ
bottles_df = pd.DataFrame(...)  # –î–∞–Ω–Ω—ã–µ —Ñ–∞—Å–æ–≤–∫–∏
kitchen_df = pd.DataFrame(...)  # –î–∞–Ω–Ω—ã–µ –∫—É—Ö–Ω–∏

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
analytics = DashboardAnalytics(
    draft_data=draft_df,
    bottles_data=bottles_df,
    kitchen_data=kitchen_df
)

# –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫
metrics = analytics.calculate_all_metrics(bar_name="–õ–∏–≥–æ–≤—Å–∫–∏–π")

print(f"–í—ã—Ä—É—á–∫–∞: {metrics['total_revenue']} ‚ÇΩ")
print(f"–°—Ä–µ–¥–Ω–∏–π —á–µ–∫: {metrics['avg_check']} ‚ÇΩ")
print(f"–ü—Ä–∏–±—ã–ª—å: {metrics['total_margin']} ‚ÇΩ")

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã
table_data = analytics.get_metrics_table_data(bar_name="–õ–∏–≥–æ–≤—Å–∫–∏–π")
for row in table_data:
    print(f"{row['metric']}: {row['value']} {row['unit']}")
```

## üìä –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ iiko API:

1. **–†–∞–∑–ª–∏–≤–Ω–æ–µ –ø–∏–≤–æ**: `get_draft_sales_report()` –∏–∑ `core/olap_reports.py`
2. **–§–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –ø–∏–≤–æ**: `get_beer_sales_report()` –∏–∑ `core/olap_reports.py`
3. **–ö—É—Ö–Ω—è**: `get_store_operations_report()` –∏–∑ `core/olap_reports.py`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞

**–°—Ä–µ–¥–Ω–∏–π —á–µ–∫:**
```
–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ = –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ–∫–æ–≤
```

**–î–æ–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
```
–î–æ–ª—è = (–í—ã—Ä—É—á–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ / –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞) √ó 100%
```

**–ù–∞—Ü–µ–Ω–∫–∞:**
```
–ù–∞—Ü–µ–Ω–∫–∞ = ((–í—ã—Ä—É—á–∫–∞ - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å) / –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å) √ó 100%
```

**–ü—Ä–∏–±—ã–ª—å (–º–∞—Ä–∂–∞):**
```
–ü—Ä–∏–±—ã–ª—å = –í—ã—Ä—É—á–∫–∞ - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–ª–∞—Å—Å `DashboardAnalytics` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –±–∞—Ä—É
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∫–æ–ª–æ–Ω–æ–∫ –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—É–º–º–∏—Ä—É–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ DataFrame

## üé® UI –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞** - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
- **–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–≤–æ–¥–∫–∏** - –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞** - –≤—Å–µ 15 –º–µ—Ç—Ä–∏–∫ –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º –≤–∏–¥–µ
- **–¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
  - –ó–µ–ª–µ–Ω—ã–π - –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–≤—ã—Ä—É—á–∫–∞, –ø—Ä–∏–±—ã–ª—å)
  - –°–∏–Ω–∏–π - –ø—Ä–æ—Ü–µ–Ω—Ç—ã (–¥–æ–ª–∏, –Ω–∞—Ü–µ–Ω–∫–∏)

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–°–ø–∏—Å–∞–Ω–∏—è –±–∞–ª–ª–æ–≤**: –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0, —Ç–∞–∫ –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω. –î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ:
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –≤ iiko API
   - –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_get_loyalty_points()` –≤ `dashboard_analysis.py`

2. **–ö—É—Ö–Ω—è**: –î–∞–Ω–Ω—ã–µ –∫—É—Ö–Ω–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã.

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –î–ª—è –±–æ–ª—å—à–∏—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (>3 –º–µ—Å—è—Ü–µ–≤) –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-30 —Å–µ–∫—É–Ω–¥.

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –°–ø–∏—Å–∞–Ω–∏—è –±–∞–ª–ª–æ–≤ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–∑–∞–≥–ª—É—à–∫–∞)
- –ù–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel/CSV (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)
- –ù–µ—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤ (—Ç–æ–ª—å–∫–æ —Ç–∞–±–ª–∏—Ü—ã)
- –ù–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–æ–≤

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ (–ª–∏–Ω–µ–π–Ω—ã–µ, –∫—Ä—É–≥–æ–≤—ã–µ)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ Excel
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìù –ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π

### v1.0.0 (2024-11-16)
- –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑
- 15 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å date picker
- API endpoint
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –±–∞—Ä–∞–º
- –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞

---

**–ê–≤—Ç–æ—Ä:** Claude (AI Assistant)
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 16 –Ω–æ—è–±—Ä—è 2024
**–ü—Ä–æ–µ–∫—Ç:** Beer ABC/XYZ Analysis System
